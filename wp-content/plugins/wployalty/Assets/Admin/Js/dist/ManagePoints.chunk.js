"use strict";(self.webpackChunkreact_wordpress=self.webpackChunkreact_wordpress||[]).push([[99],{140:(e,t,a)=>{a.d(t,{A:()=>s});var l=a(6540),n=a(3112);const r=function(e){var t=e.setActive,a=e.activeState,n=e.setActiveState,r=e.right,s=e.activeLabels;return l.createElement("div",{className:"flex   flex-col border rounded-lg bg-white w-55 text-light border-light_border z-10 absolute ".concat(r," top-13 overflow-hidden")},s.map((function(e,r){return l.createElement("p",{key:r,onClick:function(){!function(e){t(!1),n({value:e.value,label:e.label})}(e)},className:"flex items-center  px-4 py-2 justify-between ".concat(e.value===a.value?"bg-primary_extra_light text-primary":"bg-white text-dark "," hover:bg-primary_extra_light cursor-pointer hover:bg-opacity-50")},e.label,e.value===a.value&&l.createElement("span",{className:"flex items-center"},l.createElement("i",{className:" wlr wlrf-tick color-important font-medium  text-lg 2xl:text-xl leading-0 cursor-pointer "})))})))},s=function(e){var t=e.icon,a=e.active,s=e.setActive,c=e.activeState,i=e.setActiveState,o=e.activeLabels,m=e.width,u=void 0===m?"w-36":m,d=e.title,p=e.closeOtherDropDown,f=l.useContext(n.ib);return l.createElement("div",{className:"relative flex items-center border justify-between  ".concat(u," rounded-lg border-light_border p-1.5 cursor-pointer "),onClick:function(){p(),s(!a)}},l.createElement("div",{className:"flex items-center justify-start space-x-2 text-10px xl:text-xs 2xl:text-sm_14_l_20 "},l.createElement("p",{className:"font-medium text-light"},d||f.common.filter),l.createElement("p",{className:"text-dark font-semibold"},c.label)),l.createElement("div",null,t),a&&l.createElement(r,{active:a,setActive:s,activeState:c,setActiveState:i,right:"right-0",activeLabels:o,width:"w-40"}))}},3520:(e,t,a)=>{a.d(t,{A:()=>r});var l=a(6540),n=a(5419);const r=function(e){var t=e.processCount,a=e.totalCount;return l.createElement("div",{className:"h-5 w-65 rounded-full shimmer overflow-hidden bg-white shadow-sm relative flex "},l.createElement("div",{className:"absolute h-full  bg-green-500 ",style:{transition:"width 0.3s ",width:"".concat((0,n.rn)(t,a),"%")}}),l.createElement("span",{className:"absolute text-primary font-semibold 2xl:text-sm text-xs ",style:{left:"50%",top:"50%",transform:"translate(-50%,-50%)"}},parseInt((0,n.rn)(t,a)),"%"))}},4343:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var l=a(4467),n=a(5458),r=a(296),s=a(6540),c=a(6968),i=a(5666),o=a(9210),m=a(6070),u=a(3112),d=a(5419),p=a(4142);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,l.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const _=function(e){var t=e.localState,a=e.loadUserLists,l=e.close,n=e.open,o=e.setOpen,m=s.useState({user_email:"",points:0,comments:""}),f=(0,r.A)(m,2),_=f[0],g=f[1],v=s.useContext(u.ib),b=s.useState({}),y=(0,r.A)(b,2),w=y[0],h=y[1],E=s.useState([]),N=(0,r.A)(E,2),A=N[0],S=N[1],j=s.useState(!1),C=(0,r.A)(j,2),O=C[0],k=C[1],P=s.useState(!1),D=(0,r.A)(P,2),L=D[0],F=D[1];return s.createElement("div",{className:"w-full flex flex-col"},s.createElement("div",{className:"flex flex-col px-7 p-3 border-b  space-y-6 items-start w-35rem"},s.createElement(p.A,{width:"w-full",required:!0,type:"email",margin:"",placeholder:v.manage_points.add_new_customer.email.placeholder,label:v.manage_points.add_new_customer.email.name,value:_.user_email,onChange:function(e){g(x(x({},_),{},{user_email:e.target.value}))},onfocus:function(){return F(!0)},error:A.includes("user_email")||""===_.user_email&&L,error_message:A.includes("user_email")&&(0,d.u1)(w,"user_email")}),s.createElement(p.A,{width:"w-full",type:"text",margin:"",label:v.common.points_text,value:_.points,onChange:function(e){g(x(x({},_),{},{points:(0,d.yb)(e.target.value)}))},error:A.includes("points"),error_message:A.includes("points")&&(0,d.u1)(w,"points")}),s.createElement(p.A,{width:"w-full",type:"area",margin:"",label:v.manage_points.add_new_customer.comments,value:_.comments,onChange:function(e){g(x(x({},_),{},{comments:e.target.value}))},error:A.includes("comments"),error_message:A.includes("comments")&&(0,d.u1)(w,"comments")})),s.createElement("div",{className:"w-full flex items-center py-3 px-7   justify-end space-x-4"},s.createElement(i.A,{padding:"px-6 py-2.5",textStyle:"text-light font-medium text-sm_14_l_20",bgColor:"bg-white",outline:!0,outlineStyle:"border-light ",click:function(e){e.preventDefault(),o(!n)}},v.common.cancel),s.createElement(i.A,{disabled:O,padding:"px-6 py-3",textStyle:"text-sm_14_l_20 font-medium text-white ",click:function(e){var n;e.preventDefault(),n={wlr_nonce:t.local.point_users.wlr_user_nonce,action:"wlr_add_new_customer"},n=Object.assign({},n,_),k(!0),(0,c.MB)(n).then((function(e){var t=(0,d.xu)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?(alertify.success(t.data.message),a(),g({user_email:"",points:0,comments:""}),k(!1),h({}),S([]),l()):!1===t.success&&null!==t.data&&(h(t.data),void 0===t.data.field_error&&S([]),F(!0),(0,d.E0)(t.data,{setErrorList:S}),k(!1))}))}},v.common.save)))};var g=a(8785),v=a(4632),b=a(1845),y=a(5235),w=a(1852),h=a(3520);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const A=function(e){var t=e.close,a=e.State,l=e.setState,n=e.nonce,o=e.isProgress,m=s.useState(!0),p=(0,r.A)(m,2),f=p[0],x=p[1],_=s.useState(null),E=(0,r.A)(_,2),A=E[0],S=E[1],j=s.useState("equal"),C=(0,r.A)(j,2),O=C[0],k=C[1],P=s.useContext(u.ib),D=function(e){var t=s.useState(e),a=(0,r.A)(t,2),l=a[0],n=a[1];return s.useEffect((function(){var e;(e=l)&&"incomplete"===e.response_status&&B()}),[l]),[l,n]}({file:{},header:{},need_update:"no",process_count:0,total_count:0,limit_start:y.Nf}),L=(0,r.A)(D,2),F=L[0],M=L[1],B=function(){var e=Object.assign({},{wlr_nonce:n,action:"wlr_handle_import",need_update:F.need_update,handle_count:F.process_count,total_count:F.total_count,limit_start:F.limit_start,update_type:O,limit:a.csv_limit},F.file);(0,c.MB)(e).then((function(e){var a=(0,d.xu)(e.data);if(!0===a.success&&null!==a.data&&a.data!=={}){x(!1);var l=a.data.success;"incomplete"===l?a.data.total_count<a.data.limit_start?M(N(N({},F),{},{process_count:a.data.total_count,limit_start:a.data.limit_start,response_status:l})):M(N(N({},F),{},{process_count:F.limit_start,limit_start:a.data.limit_start,response_status:l})):"completed"===a.data.success&&(o.set(!1),M(N(N({},F),{},{process_count:F.limit_start-1,limit_start:a.data.limit_start,response_status:l})),x(!1),alertify.success(a.data.message),setTimeout((function(){R(1),$(0),t(),location.reload()}),1500),x(!1))}else!1===a.success&&null!==a.data&&(alertify.error(a.data.message),x(!1),location.reload())}))},I=s.useRef(null),z=s.useState(1),q=(0,r.A)(z,2),H=q[0],R=q[1],U=s.useState(0),V=(0,r.A)(U,2),T=V[0],$=V[1],W=[{label:P.common.select.yes,value:"yes"},{label:P.common.select.no,value:"no"}],K=[{label:"10",value:"10"},{label:"20",value:"20"},{label:"40",value:"40"},{label:"50",value:"50"}],Y=[{label:P.common.select.add,value:"add"},{label:P.common.select.sub,value:"sub"},{label:P.common.select.equal,value:"equal"}],G=[{id:1,name:P.manage_points.progress.upload},{id:2,name:P.manage_points.progress.preview},{id:3,name:P.manage_points.progress.completed}],J=function(e){var t=e.item;return s.createElement("div",{className:"flex items-center space-x-2 ".concat(t.id!=G.length?"w-4/12":"w-3/12")},s.createElement("div",{className:"flex items-center justify-center"},s.createElement("div",{className:" p-4 rounded-full border-gray-300 border border-opacity-50  \n          ".concat(H==t.id&&"bg-primary border-0 "," ").concat(T>=t.id&&"bg-green-500 border-0 ")}),s.createElement("p",{className:"absolute text-15px antialiased mt-2px ".concat((H==t.id||T>=t.id)&&"text-white")},t.id)),s.createElement("p",{className:"antialiased text-15px "},t.name),t.id!=G.length&&s.createElement("div",{className:"w-full border  border-gray-300 border-opacity-50"}))},Q=function(e){var t=e.bg,a=void 0===t?"bg-primary":t,l=e.count,n=void 0===l?0:l,r=e.text,c=void 0===r?P.manage_points.progress.total:r,i=e.textStyle,o=void 0===i?"text-primary":i;return s.createElement("div",{className:"flex items-center justify-between space-x-3 ".concat(a," bg-opacity-5 py-2 px-5 ")},s.createElement("p",{className:"text-textColor text-15px antialiased"},c),s.createElement("p",{className:"text-15px ".concat(o," font-medium")},n))};s.useEffect((function(){l(N(N({},a),{},{selectedFile:A})),x(!1)}),[A]);var X=function(){var e={};e.importfile=a.selectedFile,e.wlr_nonce=n,e.need_update=a.need_update,e.limit=a.csv_limit,e.action="wlr_import_preview",e.update_type=O;var t=function(e){return["email","points","referral_code","comment"].includes(e)};(0,c.MB)(e).then((function(e){var a=(0,d.xu)(e.data);"completed"===a.success&&null!==a.data&&a.data!=={}?(Object.keys(a.data.header).every(t)?M(N(N({},a.data),{},{limit_start:y.Nf})):(alertify.error(P.common.format),S(null),(0,d.nM)("csvFileImport"),R(1),$(0)),x(!1)):(alertify.error(a.message),x(!1))}))},Z=function(e){var t=e.active,a=e.completed,l=e.disable,n=void 0!==l&&l,r=e.operation,c=void 0===r?null:r;return s.createElement(i.A,{padding:"px-5 py-2.5",bgColor:"bg-primary",textStyle:"text-sm text-white",click:function(e){e.preventDefault(),2===H&&o.set(!0),R(t),$(a),null!==c&&c(),x(!0)},disabled:n},P.common.next)},ee=function(e){var t=e.active,a=e.completed;return s.createElement(i.A,{padding:"px-5 py-2.5",bgColor:"bg-base-btn_bg",disabled:"string"==typeof F.response_status,textStyle:"text-sm text-textColor-light",click:function(e){e.preventDefault(),R(t),$(a)}},P.common.back)},te=function(){return s.createElement("div",{className:"grid grid-cols-2 gap-3 w-full min-w-full bg-primary_extra_light py-2 px-5 rounded"},s.createElement("p",{className:"text-textColor-light antialiased text-15px"},P.manage_points.progress.field_name),s.createElement("p",{className:"text-textColor-light antialiased text-15px"},P.manage_points.progress.field_value))},ae=function(e){var t=e.fieldName,a=e.fieldValue;return s.createElement("div",{className:"grid grid-cols-2 gap-3 w-full min-w-full pb-2 px-5 rounded border-b border-gray-300",key:t},s.createElement("p",{className:"text-textColor antialiased text-15px"},t),s.createElement("p",{className:"text-textColor antialiased text-15px"},a||"-"))},le=function(){return s.useEffect((function(){var e,t;!f&&(t=function(e){e.preventDefault(),S(e.dataTransfer.files[0])},(e=document.getElementById("drop-file-ref")).addEventListener("drop",t),e.addEventListener("dragover",t))}),[]),s.createElement("div",{className:"w-full flex flex-col items-start justify-start"},s.createElement("div",{className:"w-full flex flex-col items-start justify-start px-7"},s.createElement("p",{className:"leading-5 text-xs mt-3 tracking-wide py-2.5 px-3 font-normal rounded-md",style:{backgroundColor:"rgb(255,213,87)",color:"black"}},s.createElement("span",{className:"font-medium"},s.createElement("i",{className:"wlr wlrf-warning"})," ",P.manage_points.important_label)," ",P.manage_points.import_notice),s.createElement("div",{className:"w-full space-y-3"},s.createElement("input",{accept:"text/csv, .csv",id:"csvFileImport",type:"file",onChange:function(e){(0,d.LW)(e.target.files,["csv"],"csvFileImport")&&S(e.target.files[0])},ref:I,className:"hidden"}),s.createElement("div",{className:"flex flex-col items-center justify-center space-y-4 w-full py-10 border-2 border-dashed border-gray-300 rounded cursor-pointer",onClick:function(){return I.current.click()},id:"drop-file-ref"},A?s.createElement("i",{className:"wlr wlrf-file_check text-4xl text-primary"}):s.createElement("i",{className:"wlr wlrf-file_upload text-4xl text-textColor-light"}),A?s.createElement("p",{className:"text-15px text-textColor-light"},"".concat(P.manage_points.import.added," ").concat(A.name," "),s.createElement("span",{className:"text-primary "},P.manage_points.import.choose_another_file)," ".concat(P.manage_points.import.replace)):s.createElement("p",{className:"text-15px text-textColor-light"},"".concat(P.manage_points.import.drag_drop," "),s.createElement("span",{className:"text-primary "},P.manage_points.import.choose_file)," ".concat(P.manage_points.import.upload_data))))),s.createElement("div",{className:"flex items-end  w-full space-x-4 px-7 py-4 space-y-4 border-b border-light_border"},s.createElement(g.A,{width:"w-1/3"},s.createElement(v.A,{fontSize:"text-sm",others:" font-medium text-textColor"},P.manage_points.import.update_points),s.createElement(b.A,{options:W,value:a.need_update,onChange:function(e){l(N(N({},a),{},{need_update:e.value}))}})),s.createElement(g.A,{width:"w-1/3"},s.createElement(v.A,{fontSize:"text-sm",others:" font-medium text-textColor"},P.manage_points.import.records_per_batch),s.createElement(b.A,{options:K,value:a.csv_limit,onChange:function(e){l(N(N({},a),{},{csv_limit:e.value}))}})),s.createElement(g.A,{width:"w-1/3"},s.createElement(v.A,{fontSize:"text-sm",others:" font-medium text-textColor"},P.manage_points.import.points_update_type),s.createElement(b.A,{options:Y,value:O,onChange:function(e){k(e.value)}}))),s.createElement("div",{className:"flex w-full items-center justify-end px-7  py-3"},s.createElement(Z,{active:2,completed:1,disable:!A,operation:X,removeSelectedFileId:"csvFileImport"})))},ne=function(){return s.createElement("div",{className:"flex flex-col w-full"},s.createElement("div",{className:"w-full flex-col items-center justify-start px-7 pb-3  border-b border-light_border space-y-4 overflow-y-auto max-h-350 2xl:max-h-450"},s.createElement(Q,{count:F.total_count}),s.createElement(te,null),Object.keys(F.header).map((function(e,t){return s.createElement(ae,{key:t,fieldName:e,fieldValue:F.header[e]})}))),s.createElement("div",{className:"flex items-center space-x-3  py-3 px-7 justify-end"},s.createElement(ee,{active:1,completed:0}),s.createElement(Z,{active:3,completed:2,operation:B})))},re=function(){return s.createElement("div",{className:"flex flex-col w-full"},s.createElement("div",{className:"w-full flex-col items-start justify-start border-b border-light_border pb-3 px-7 space-y-4 overflow-y-auto max-h-350 2xl:max-h-450"},s.createElement("div",{className:"flex items-center justify-between bg-green-500 bg-opacity-5 py-2 px-5 rounded"},s.createElement("p",{className:"text-textColor text-15px antialiased"},P.manage_points.progress.processed),s.createElement("div",{className:"flex items-center gap-x-2 justify-between"},s.createElement(h.A,{processCount:F.process_count,totalCount:F.total_count}),s.createElement("p",{className:"text-15px text-green-500 font-medium"},F.process_count))),s.createElement(te,null),Object.keys(F.header).map((function(e,t){return s.createElement(ae,{key:t,fieldName:e,fieldValue:F.header[e]})}))))};return s.createElement("div",{className:"w-35rem mt-3 xl:mt-4 2xl:mt-5 flex flex-col items-start justify-start space-y-5"},s.createElement((function(){return s.createElement("div",{className:"w-full flex items-center px-24 space-x-2 justify-center"},G.map((function(e){return s.createElement(J,{item:e,key:e.id})})))}),null),f?s.createElement(w.A,{height:"h-[250px]"}):s.createElement("div",{className:"flex flex-col w-full space-y-3"},function(){switch(H){case 1:default:return s.createElement(le,null);case 2:return s.createElement(ne,null);case 3:return s.createElement(re,null)}}()))};function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,l.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const C=function(e){var t,a,l,n,o,m=e.close,p=e.State,f=(e.setState,e.nonce),x=e.isProgress,_=s.useContext(u.ib),g=s.useState(!0),v=(0,r.A)(g,2),b=v[0],E=v[1],N=(t={limit:y.y8,limit_start:0,process_count:0,total_count:0,base_url:"",action:"wlr_handle_export"},a=s.useState(t),l=(0,r.A)(a,2),n=l[0],o=l[1],s.useEffect((function(){var e;(e=n)&&"incomplete"===e.response_status&&z()}),[n]),[n,o]),A=(0,r.A)(N,2),S=A[0],C=A[1],O=s.useState(1),k=(0,r.A)(O,2),P=k[0],D=k[1],L=s.useState(0),F=(0,r.A)(L,2),M=F[0],B=F[1],I=[{id:1,name:_.manage_points.progress.preview},{id:2,name:_.manage_points.progress.completed}];s.useEffect((function(){var e;e={wlr_nonce:f,action:"wlr_export_preview"},(0,c.MB)(e).then((function(e){var t=(0,d.xu)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?(C(t.data),E(!1)):!1===t.success&&null!==t.data&&alertify.error(t.data.message)}))}),[p.users]);var z=function(){var e={wlr_nonce:f,action:"wlr_handle_export",process_count:S.process_count,total_count:S.total_count,limit_start:S.limit_start,limit:S.limit};(0,c.MB)(e).then((function(e){var t=(0,d.xu)(e.data);if(!0===t.success&&null!==t.data){var a=t.data.success;"incomplete"===a?t.data.total_count<=t.data.limit_start?C(j(j({},S),{},{process_count:t.data.total_count,limit_start:t.data.limit_start,response_status:a})):C(j(j({},S),{},{process_count:t.data.limit_start,limit_start:t.data.limit_start,response_status:a})):"completed"===a&&(x.set(!1),E(!1),alertify.success(t.data.message),setTimeout((function(){D(1),B(0),m(),location.reload()}),500)),E(!1)}else!1===t.success&&null!==t.data&&(alertify.error(t.data.message),E(!1))}))},q=function(e){var t=e.item;return s.createElement("div",{className:"flex items-center space-x-2 ".concat(t.id!=I.length?"w-4/12":"w-3/12")},s.createElement("div",{className:"flex items-center justify-center"},s.createElement("div",{className:" p-4 rounded-full border-gray-300 border border-opacity-50  \n          ".concat(P==t.id&&"bg-primary border-0 "," ").concat(M>=t.id&&"bg-green-500 border-0 ")}),s.createElement("p",{className:"absolute text-15px antialiased mt-2px ".concat((P==t.id||M>=t.id)&&"text-white")},t.id)),s.createElement("p",{className:"antialiased text-15px "},t.name),t.id!=I.length&&s.createElement("div",{className:"w-full border  border-gray-300 border-opacity-50"}))},H=function(e){var t=e.bg,a=void 0===t?"bg-primary":t,l=e.count,n=void 0===l?0:l,r=e.text,c=void 0===r?_.manage_points.progress.total:r,i=e.textStyle,o=void 0===i?"text-primary":i;return s.createElement("div",{className:"flex items-center justify-between ".concat(a," bg-opacity-5 py-2 px-5 rounded")},s.createElement("p",{className:"text-textColor text-15px antialiased"},c),s.createElement("p",{className:"text-15px ".concat(o," font-medium")},n))},R=function(e){var t=e.active,a=e.completed,l=e.disable,n=void 0!==l&&l;return s.createElement(i.A,{padding:"px-5 py-2.5",bgColor:"bg-primary",textStyle:"text-sm text-white",click:function(e){e.preventDefault(),D(t),B(a),E(!0),x.set(!0),z()},disabled:n},_.common.next)},U=function(){return s.createElement("div",{className:"flex flex-col w-full"},s.createElement("div",{className:"w-full flex-col items-start px-7 pb-3 border-b border-light_border justify-start space-y-4"},s.createElement(H,{count:S.total_count})),s.createElement("div",{className:"flex items-center space-x-2 px-7 py-3  justify-end"},s.createElement(R,{active:2,completed:1})))},V=function(){return s.createElement("div",{className:"w-full flex flex-col"},s.createElement("div",{className:"w-full flex-col items-start justify-start px-7 pb-3 border-b border-light_border space-y-4"},s.createElement(H,{count:S.total_count}),s.createElement("div",{className:"flex items-center justify-between bg-green-500 bg-opacity-5 py-2 px-5 rounded"},s.createElement("p",{className:"text-textColor text-15px antialiased"},_.manage_points.progress.processed),s.createElement("div",{className:"flex items-center gap-x-2 justify-between"},s.createElement(h.A,{processCount:S.process_count,totalCount:S.total_count}),s.createElement("p",{className:"text-15px text-green-500 font-medium"},S.process_count)))))};return s.createElement("div",{className:"w-35rem mt-3 xl:mt-4 2xl:mt-5 flex flex-col items-start justify-start space-y-5"},b?s.createElement(w.A,{height:"h-[150px]"}):s.createElement("div",{className:"flex flex-col w-full space-y-3"},s.createElement((function(){return s.createElement("div",{className:"w-full flex items-center space-x-2 justify-center"},I.map((function(e){return s.createElement(q,{item:e,key:e.id})})))}),null),function(){switch(P){case 1:default:return s.createElement(U,null);case 2:return s.createElement(V,null)}}()))},O=function(e){e.close;var t=e.localState,a=s.useContext(u.ib),l=function(e){var t=e.fileName,l=e.download;return s.createElement("div",{className:"flex items-center px-5 py-3 justify-between gap-3 w-full min-w-full border border-light_border  bg-primary_extra_light rounded ",key:t},s.createElement("div",{className:"flex justify-start gap-x-2"},s.createElement("div",null,s.createElement("i",{className:"text-xl ml-2 text-light leading-0 antialiased wlr wlrf-file color-important "})),s.createElement("p",{className:"text-textColor antialiased text-15px"},t)),s.createElement("a",{download:t,href:l,className:"text-sm text-primary hover:text-green-500 border-none shadow-none"},a.manage_points.progress.download))};return s.createElement("div",{className:"w-35rem flex flex-col justify-start items-start p-5 h-125 2xl:h-150 space-y-2 overflow-y-auto"},t.local.point_users.export_csv_file_list.map((function(e,t){return s.createElement(l,{fileName:e.file_name,download:e.file_url,key:t})})))};var k=a(2235),P=a(5873),D=a(8592);const L=function(e){var t=e.icon,a=e.title,l=e.description,n=e.import_customer,r=e.add_new,c=e.importAction,o=e.addNewCustomerAction,m=(0,s.useContext)(u.Hi);return s.createElement("div",{className:"w-full  h-120 flex flex-col justify-center items-center gap-y-2 2xl:gap-y-4 bg-white"},s.createElement("div",null,t),s.createElement("h2",{className:"text-sm 2xl:text-xl text-dark font-bold"},a),s.createElement("p",{className:"text-light text-base font-normal  text-center tracking-wide max-w-xl leading-7.5"},l),m&&s.createElement("div",{className:"flex items-center justify-center gap-2 2xl:gap-3"},s.createElement(i.A,{padding:"px-3 2xl:px-5 py-2 2xl:py-3",bgColor:"bg-white",outline:!0,textStyle:"text-primary font-medium text-xs 2xl:text-sm_14_l_20",outlineStyle:"border-primary_border",others:"hover:shadow-none",click:c},n),s.createElement(i.A,{padding:"px-3 2xl:px-5 py-2 2xl:py-3",bgColor:"bg-primary",outline:!1,textStyle:"text-white font-medium text-xs 2xl:text-sm_14_l_20",others:"hover:shadow-none",click:o},r)))};var F=a(140),M=a(7859),B=a(6211);const I=function(e){var t=e.AllCheck,a=e.AllCheckList,l=e.setAllCheck,n=e.State,r=e.active,c=e.setActive,i=e.activeState,o=e.setActiveState,m=e.CommonState,p=(0,s.useContext)(u.ib),f=s.useContext(u.Hi),x=function(e){var t=e.children,a=e.span,l=e.subtitle;return s.createElement("div",{className:"grid ".concat(a,"  absoulute  text-light text-10px 2xl:text-12px font-semibold uppercase leading-4 self-center")},t," ",s.createElement("span",{className:"text-extra_light font-normal text-10px "},l))};return s.createElement("div",{className:"grid grid-cols-12 items-center 2xl:gap-3 w-full min-w-full  py-4",style:{minWidth:"1024px"}},s.createElement(B.A,{checked:t&&a.length===n.users.length,click:function(){return l(!t)}}),s.createElement((function(e){var t=e.children,a=e.span;return e.subtitle,s.createElement("div",{className:"flex items-center justify-start space-x-2  ".concat(a)},s.createElement("div",{onClick:function(){(0,d.$R)(r,c,p.common.email_descending,p.common.email_ascending,"email_desc","email_asc",o,m,"customers")},className:"flex items-center justify-start space-x-2 cursor-pointer"},s.createElement("p",{className:" grid ".concat(a," text-light text-10px 2xl:text-12px  font-bold uppercase leading-4 whitespace-nowrap ")},t),s.createElement("span",{className:"text-light flex items-center"},["email_asc","email_desc"].includes(i.value)?s.createElement("i",{className:" color-important wlr wlrf-".concat("email_asc"===i.value?"sort-asc":"sort-desc"," text-sm  transition-all duration-300 ")}):s.createElement("i",{className:" color-important wlr wlrf-sort text-sm  transition-all duration-300  "}))))}),{span:"col-span-3"},p.manage_points.customers),s.createElement((function(e){var t=e.children,a=e.span;return s.createElement("div",{className:"flex items-center justify-start space-x-2  ".concat(a," ")},s.createElement("div",{onClick:function(){(0,d.$R)(r,c,p.common.point_descending,p.common.point_ascending,"point_desc","point_asc",o,m,"customers")},className:"flex items-center justify-start space-x-2 cursor-pointer"},s.createElement("p",{className:" grid ".concat(a," text-light text-10px 2xl:text-12px  font-bold uppercase leading-4 whitespace-nowrap ")},t),s.createElement("span",{className:"text-light flex items-center"},["point_asc","point_desc"].includes(i.value)?s.createElement("i",{className:" color-important wlr wlrf-".concat("point_asc"===i.value?"sort-asc":"sort-desc"," text-sm  transition-all duration-300 ")}):s.createElement("i",{className:" color-important wlr wlrf-sort text-sm  transition-all duration-300  "}))))}),{span:"col-span-3"},p.common.points_text),s.createElement((function(e){var t=e.children,a=e.span;return s.createElement("div",{className:"grid ".concat(a,"  absoulute")},s.createElement("div",{className:"text-light text-10px 2xl:text-12px font-semibold uppercase leading-4"},t))}),{span:"col-span-2"},p.rewards.name),s.createElement((function(e){var t=e.children,a=e.span;return e.subtitle,s.createElement("div",{className:"flex items-center justify-start space-x-2  ".concat(a)},s.createElement("div",{onClick:function(){f&&(0,d.$R)(r,c,p.common.level_descending,p.common.level_ascending,"level_desc","level_asc",o,m,"customers")},className:"flex items-center justify-start space-x-2 ".concat(f&&"cursor-pointer"," ")},s.createElement("p",{className:" grid ".concat(a," text-light text-10px 2xl:text-12px  font-bold uppercase leading-4 whitespace-nowrap ")},t),f&&s.createElement("span",{className:"text-light flex items-center"},["level_asc","level_desc"].includes(i.value)?s.createElement("i",{className:" color-important wlr wlrf-".concat("level_asc"===i.value?"sort-asc":"sort-desc"," text-sm  transition-all duration-300 ")}):s.createElement("i",{className:" color-important wlr wlrf-sort text-sm  transition-all duration-300  "}))))}),{span:"col-span-1"},p.manage_points.levels_image),s.createElement(x,{span:"col-span-1"},p.levels.created_on_label),s.createElement(x,{span:"col-span-1 md:justify-center"},p.common.actions))};var z=a(9327),q=a(7733),H=a(5586);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,l.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var V=s.lazy((function(){return a.e(817).then(a.bind(a,8703))}));const T=function(){var e=s.useContext(u.ib),t=s.useContext(u.Hi),a=s.useContext(u.DC),l=a.CommonState,p=a.setCommonState,f=a.appState,x=l.customers,g=x.sort,v=x.limit,b=x.search,w=s.useState(null),h=(0,r.A)(w,2),E=h[0],N=h[1],S=s.useState({loading:!0,users:[],pageCount:1,offset:0,selectedFile:null,need_update:"no",csv_limit:y.hr,export_popup:!1,export_limit:y.r,export_process_item:0,export_total_count:0,export_none:""}),j=(0,r.A)(S,2),B=j[0],R=j[1],T=!1,$=s.useState(!1),W=(0,r.A)($,2),K=W[0],Y=W[1],G=s.useState(!1),J=(0,r.A)(G,2),Q=J[0],X=J[1],Z=s.useState(!1),ee=(0,r.A)(Z,2),te=ee[0],ae=ee[1],le=s.useState(!1),ne=(0,r.A)(le,2),re=ne[0],se=ne[1],ce=s.useState(!1),ie=(0,r.A)(ce,2),oe=ie[0],me=ie[1],ue=s.useState(!1),de=(0,r.A)(ue,2),pe=de[0],fe=de[1],xe=s.useState(!1),_e=(0,r.A)(xe,2),ge=_e[0],ve=_e[1],be=s.useState(""),ye=(0,r.A)(be,2),we=ye[0],he=ye[1],Ee=s.useState([]),Ne=(0,r.A)(Ee,2),Ae=Ne[0],Se=Ne[1],je=s.useState(!1),Ce=(0,r.A)(je,2),Oe=Ce[0],ke=Ce[1],Pe=s.useState(!1),De=(0,r.A)(Pe,2),Le=De[0],Fe=De[1],Me=s.useState(!1),Be=(0,r.A)(Me,2),Ie=Be[0],ze=Be[1],qe=s.useState(""),He=(0,r.A)(qe,2),Re=He[0],Ue=He[1],Ve=[{value:"all",label:e.common.active_all},{value:"id_asc",label:e.common.id_asc},{value:"id_desc",label:e.common.id_desc},{value:"email_asc",label:e.common.email_ascending},{value:"email_desc",label:e.common.email_descending},{value:"level_asc",label:e.common.level_ascending},{value:"level_desc",label:e.common.level_descending},{value:"point_asc",label:e.common.point_ascending},{value:"point_desc",label:e.common.point_descending}],Te=function(e){var t=(0,n.A)(Ae);t.includes(e)?(t.splice(t.indexOf(e),1),Se(t)):Se([].concat((0,n.A)(t),[e]))},$e=function(e){var t={wlr_nonce:f.local.point_users.wlr_user_nonce,action:"wlr_get_customer_list",limit:v.value,offset:void 0!==(null==e?void 0:e.offset)?e.offset:x.offset,sorting_field:g.value,search:(null==e?void 0:e.search)||b};R(U(U({},B),{},{loading:!0})),(0,c.MB)(t).then((function(e){var t=(0,d.xu)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?R((function(e){return U(U({},e),{},{users:t.data.item,pageCount:Math.ceil(t.data.total_count/t.data.limit),loading:!1})})):!1===t.success&&null!==t.data&&(alertify.error(t.data.message),he(b),R(U(U({},B),{},{loading:!1})))}))},We=function(e){var t={wlr_nonce:f.local.common.wlr_common_user_nonce,action:"wlr_update_customer_birth_date",id:e.id,birth_date:e.birthday_date};R(U(U({},B),{},{loading:!0})),(0,c.MB)(t).then((function(e){var t=(0,d.xu)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?(R(U(U({},B),{},{loading:!1})),alertify.success(t.data.message)):!1===t.success&&null!==t.data&&(R(U(U({},B),{},{loading:!1})),alertify.error(t.data.message)),$e()}))};s.useEffect((function(){T=!0,$e()}),[f]),s.useEffect((function(){if(!T){var e=U({},l);e.customers.offset=0,p(e),$e()}}),[g,v]);var Ke=function(){var e=U({},l);e.customers.offset=0,p(e),he(b),$e({search:b,offset:0})};s.useLayoutEffect((function(){var e=[];ge?(B.users.map((function(t){return e.push(t.id)})),Se(e)):Se([])}),[ge]),s.useEffect((function(){0!==B.users.length&&B.users.length===Ae.length&&ve(!0)}),[Ae]);var Ye,Ge,Je=function(e,t){var a=(0,n.A)(B.users);a.map((function(a){t.id===a.id&&(a.birthday_date=e)})),R(U(U({},B),{},{users:a}))},Qe=function(){var e={action:"wlr_bulk_delete_users",user_list:Ae,wlr_nonce:f.local.point_users.wlr_user_nonce};(0,c.MB)(e).then((function(e){var t=(0,d.xu)(e.data);!0===t.success&&t.data!=={}?(alertify.success(t.data.message),Se([]),ve(!1)):alertify.error(t.data.message),$e()}))},Xe=function(e){var t={action:"wlr_delete_customer",id:e,wlr_nonce:f.local.point_users.wlr_user_nonce};(0,c.MB)(t).then((function(e){var t=(0,d.xu)(e.data);!0===t.success&&t.data!=={}?(alertify.success(t.data.message),Se([]),ve(!1)):alertify.error(t.data.message),$e()}))};return s.createElement("div",{className:"bg-white w-full rounded-b-xl h-full flex flex-col items-start py-5 px-8 space-y-4 "},s.createElement("div",{className:"flex items-center justify-between w-full gap-x-1.5"},s.createElement(P.A,{title:e.manage_points.name,videoLink:e.common.all_video_links.point_users}),s.createElement("div",{className:"flex items-center gap-x-1.5 2xl:gap-x-2 "},Ae.length>0?s.createElement(i.A,{icon:s.createElement("i",{className:"text-md leading-0 antialiased wlr wlrf-delete text-redd color-important "}),bgColor:"bg-white",textStyle:"text-redd font-medium text-sm_14_l_20",padding:"px-5 py-3",outline:!0,outlineStyle:"border-redd",click:function(t){t.preventDefault(),(0,D.Vx)(Qe,e.manage_points.delete_multi_alert_message,e.manage_points.delete_ok,e.manage_points.delete_cancel,e.manage_points.delete_customer)}},e.common.delete):s.createElement("div",{className:"flex items-center gap-x-1.5 2xl:gap-x-2"},s.createElement(k.A,{id:"search_customers",search_icon_id:"search_customer_icon",placeHolder:e.manage_points.search_customer,value:b,onChange:function(e){var t=U({},l);t.customers.search=e.target.value,p(t)},onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),Ke())},click:function(e){e.preventDefault(),ke(!1),Fe(!1),Ke()},onfocus:function(e){ke(!1),Fe(!1)},others:"w-32.5 xl:w-37.5 2xl:w-45"}),s.createElement(F.A,{title:e.common.sort_by,active:Oe,setActive:ke,activeState:g,setActiveState:function(e){var t=U({},l);t.customers.sort={value:e.value,label:e.label},p(t)},activeLabels:t?Ve:(Ye=Ve,Ge=[],(0,n.A)(Ye).map((function(e){["level_asc","level_desc"].includes(e.value)||Ge.push(e)})),Ge),width:"w-44",icon:s.createElement("i",{className:"text-xl ml-2 text-light leading-0 antialiased wlr wlrf-filter color-important  "}),closeOtherDropDown:function(){Fe(!1)}}),s.createElement(i.A,{id:"import_customers",icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-import color-important"}),bgColor:"bg-white",textStyle:"text-primary font-medium text-xs  2xl:text-sm_14_l_20",h:!0,padding:"xl:px-3 2xl:px-5 px-2.5 py-2.5",outline:!0,outlineStyle:"border-primary",click:function(e){e.preventDefault(),t&&(X(!0),ke(!1),Fe(!1))},is_pro:t},e.manage_points.import_txt),s.createElement(i.A,{id:"export_customers",icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-export color-important "}),bgColor:"bg-white",textStyle:"text-primary font-medium text-xs  2xl:text-sm_14_l_20",padding:"xl:px-3 2xl:px-5 px-2.5 py-2.5",outline:!0,outlineStyle:"border-primary",click:function(e){t&&(e.preventDefault(),ae(!0),ke(!1),Fe(!1))},is_pro:t},e.manage_points.export_txt),f.local.point_users.show_export_file_download>0&&t&&s.createElement(i.A,{padding:"xl:px-3 2xl:px-5 px-2.5 py-2.5",outline:!0,icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-document-download color-important "}),bgColor:"bg-white",textStyle:"text-xs  2xl:text-sm_14_l_20 text-primary ",minwidth:"180px",click:function(e){e.preventDefault(),t&&(fe(!0),ke(!1),Fe(!1))},is_pro:t},e.manage_points.exported_txt),s.createElement(i.A,{id:"add_new_customer",icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-customer color-important "}),bgColor:"bg-primary",textStyle:"text-white font-medium text-xs  2xl:text-sm_14_l_20",padding:"xl:px-3 2xl:px-5 px-2.5 py-3",outline:!0,outlineStyle:"border-primary_light",click:function(e){e.preventDefault(),t&&(Y(!0),ke(!1),Fe(!1))},is_pro:t},e.manage_points.add_new_customer_txt)))),s.createElement("div",{className:"flex flex-col items-start w-full ",onClick:function(){ke(!1)}},s.createElement(I,{AllCheck:ge,AllCheckList:Ae,setAllCheck:ve,State:B,active:Ie,setActive:ze,activeState:g,setActiveState:p,CommonState:l}),B.loading?s.createElement(q.A,{listData:v.value,height:"h-158"}):B.users.length>0?s.createElement("div",{className:"relative flex flex-col space-y-2 items-start w-full min-h-158",onClick:function(){Fe(!1)}},B.users.map((function(e){return s.createElement(s.Suspense,{key:e.id,fallback:s.createElement(z.A,{height:"h-30"})},s.createElement(V,{key:e.id,user:e,State:B,setState:R,localState:f,AllCheckList:Ae,AddCheck:Te,updateAction:We,deleteUser:Xe,save:Je,copied:{value:Re,set:Ue},ShowPoints:{value:oe,set:me},id:{value:E,set:N}}))}))):s.createElement(L,{icon:s.createElement("i",{className:"text-6xl 2xl:text-8xl text-primary  wlr wlrf-customer-empty color-important "}),title:""===we?e.manage_points.empty.name:e.manage_points.no_customers,description:""===we?e.manage_points.empty.description:e.manage_points.no_customers_description,import_customer:e.manage_points.import_customers,add_new:e.manage_points.add_new_customer_txt,importAction:function(e){e.preventDefault(),X(!0)},addNewCustomerAction:function(e){e.preventDefault(),Y(!0)}}),s.createElement("div",{className:"flex items-center justify-end  w-full py-3"},B.users.length>0&&s.createElement(M.A,{editLimit:Le,setEditLimit:Fe,limitFilter:v,setLimitFilter:function(e){var t=U({},l);t.customers.limit={value:e.value},p(t)},closeOtherDropDown:function(){ke(!1)}}),B.pageCount>1&&s.createElement(o.A,{handlePageClick:function(e){var t=e.selected,a=Math.ceil(t*v.value),n=U({},l);n.customers.offset=a,p(n),$e()},pageCount:B.pageCount,limit:!0,forcePage:x.offset/x.limit.value,loading:B.loading}))),K&&s.createElement(m.A,{title:e.manage_points.add_new_customer_txt,open:K,setOpen:Y},s.createElement(_,{open:K,setOpen:Y,localState:f,loadUserLists:$e,close:function(){return Y(!1)}})),Q&&s.createElement(m.A,{title:e.manage_points.import_customers,open:Q,setOpen:X,clickOutSide:!1,isProgress:re},s.createElement(A,{close:function(){return X(!1)},State:B,setState:R,nonce:f.local.point_users.wlr_user_nonce,isProgress:{val:re,set:se}})),te&&s.createElement(m.A,{title:e.manage_points.export_customers,open:te,setOpen:ae,clickOutSide:!1,isProgress:re},s.createElement(C,{close:function(){return ae(!1)},State:B,setState:R,isProgress:{val:re,set:se},nonce:f.local.point_users.wlr_user_nonce})),fe&&s.createElement(m.A,{title:e.manage_points.download_exports,open:pe,setOpen:fe},s.createElement(O,{close:function(){return pe(!1)},localState:f})),oe&&s.createElement(m.A,{title:e.manage_points.update_points,open:oe,setOpen:me},s.createElement(H.A,{id:E,handlePointUpdate:d.Yc,reload:$e,nonce:f.local.common.wlr_common_user_nonce,setShowPoints:me})))}},7859:(e,t,a)=>{a.d(t,{A:()=>s});var l=a(6540),n=[{value:5},{value:10},{value:20},{value:50},{value:100}];const r=function(e){e.editlimit;var t=e.setEditLimit,a=e.limitFilter,r=e.setLimitFilter,s=e.right,c=void 0===s?0:s;return[5,10,20,50,100].includes(a.value),l.createElement("div",{className:"absolute flex  flex-col border rounded-lg bg-white w-23  text-light border-light_border z-10  ".concat(c,"  bottom-14 overflow-hidden")},n.map((function(e,n){return l.createElement("p",{key:n,onClick:function(){return function(e){t(!1),r({value:e.value})}(e)},className:"flex items-center  px-4 py-2 justify-between ".concat(e.value==a.value?"bg-primary_extra_light text-primary":"bg-white text-dark "," hover:bg-primary_extra_light cursor-pointer hover:bg-opacity-50")},e.value,e.value==a.value&&l.createElement("span",{className:"flex items-center"},l.createElement("i",{className:" wlr wlrf-tick color-important font-medium  text-lg 2xl:text-xl leading-0 cursor-pointer "})))})))},s=function(e){var t=e.editLimit,a=e.setEditLimit,n=e.limitFilter,s=e.setLimitFilter,c=e.closeOtherDropDown;return l.createElement("div",{className:"relative flex items-center border justify-between h-12 w-23 px-4 py-2 space-x-3 rounded-lg border-light_border   cursor-pointer ",onClick:function(){c(),a(!t)}},l.createElement("div",{className:"text-dark font-medium text-sm_14_l_20"},n.value),l.createElement("div",null,l.createElement("i",{className:"text-xl ml-2 text-light leading-0 antialiased wlr wlrf-updown color-important "})),t&&l.createElement(r,{editLimit:t,setEditLimit:a,limitFilter:n,setLimitFilter:s,right:"right-0"}))}}}]);